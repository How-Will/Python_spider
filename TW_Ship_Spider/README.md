# 爬取台湾海峡船舶信息

1. 目标URL：https://mpbais.motcmpb.gov.tw/

2. 目标信息

   在 `items.py` 文件中写入你想要爬取的信息。

   ```python
   IMO_Number = scrapy.Field()
   MMSI = scrapy.Field()
   ShipName = scrapy.Field()   # 船名
   Call_Sign = scrapy.Field()  # 呼号
   Ship_and_Cargo_Type = scrapy.Field()    # 船舶类型
   Longitude = scrapy.Field()  # 经度
   Latitude = scrapy.Field()   # 纬度
   COG = scrapy.Field()    # 航行
   SOG = scrapy.Field()    # 航速
   Record_Time = scrapy.Field()    # 记录时间
   Navigational_Status = scrapy.Field()    # 航行状态
   ```

   - 船舶类型

     ```js
     var shiptype_hash = {
         '1':'保留',
         '2':'保留',
         '3':'保留',
         '4':'保留',
         '5':'保留',
         '6':'保留',
         '7':'保留',
         '8':'保留',
         '9':'保留',
         '10':'保留',
         '11':'保留',
         '12':'保留',
         '13':'保留',
         '14':'保留',
         '15':'保留',
         '16':'保留',
         '17':'保留',
         '18':'保留',
         '19':'保留',
         '20':'飛翼船',
         '21':'載運危險貨物、有害物質或海洋污染物,A類IMO有害物質或海洋污染物',
         '22':'載運危險貨物、有害物質或海洋污染物,B類IMO有害物質或海洋污染物',
         '23':'載運危險貨物、有害物質或海洋污染物,C類IMO有害物質或海洋污染物',
         '24':'載運危險貨物、有害物質或海洋污染物,IMO有害物質或海洋污染物',
         '25':'保留',
         '26':'保留',
         '27':'保留',
         '28':'保留',
         '29':'保留',
         '30':'漁船',
         '31':'拖船',
         '32':'拖曳長度超過200公尺或寬超過25公尺之拖船',
         '33':'從事疏浚或水下作業之船舶',
         '34':'從事潛水作業之船舶',
         '35':'從事軍事作業之船舶',
         '36':'帆船',
         '37':'遊艇或娛樂船舶',
         '38':'保留',
         '39':'保留',
         '40':'高速船',
         '41':'載運危險貨物、有害物質或海洋污染物,A類IMO有害物質或海洋污染物',
         '42':'載運危險貨物、有害物質或海洋污染物,B類IMO有害物質或海洋污染物',
         '43':'載運危險貨物、有害物質或海洋污染物,C類IMO有害物質或海洋污染物',
         '44':'載運危險貨物、有害物質或海洋污染物,IMO有害物質或海洋污染物',
         '45':'保留',
         '46':'保留',
         '47':'保留',
         '48':'保留',
         '49':'無額外資訊',
         '50':'引水船',
         '51':'搜索船',
         '52':'拖駁船',
         '53':'港口補給舶',
         '54':'載有防污設施或設備之船舶',
         '55':'執法船舶',
         '56':'備用-指配給本地船舶',
         '57':'備用-指配給本地船舶',
         '58':'醫療運用船舶',
         '59':'Mob-83無線電規則第18號決議案所規範之船',
         '60':'客船',
         '61':'載運危險貨物、有害物質或海洋污染物,A類IMO有害物質或海洋污染物',
         '62':'載運危險貨物、有害物質或海洋污染物,B類IMO有害物質或海洋污染物',
         '63':'載運危險貨物、有害物質或海洋污染物,C類IMO有害物質或海洋污染物',
         '64':'載運危險貨物、有害物質或海洋污染物,IMO有害物質或海洋污染物',
         '65':'保留',
         '66':'保留',
         '67':'保留',
         '68':'保留',
         '69':'無額外資訊',
         '70':'貨船',
         '71':'載運危險貨物、有害物質或海洋污染物,A類IMO有害物質或海洋污染物',
         '72':'貨船載運危險貨物、有害物質或海洋污染物,B類IMO有害物質或海洋污染物',
         '73':'載運危險貨物、有害物質或海洋污染物,C類IMO有害物質或海洋污染物',
         '74':'載運危險貨物、有害物質或海洋污染物,IMO有害物質或海洋污染物',
         '75':'保留',
         '76':'保留',
         '77':'保留',
         '78':'保留',
         '79':'無額外資訊',
         '80':'油輪',
         '81':'載運危險貨物、有害物質或海洋污染物,A類IMO有害物質或海洋污染物',
         '82':'載運危險貨物、有害物質或海洋污染物,B類IMO有害物質或海洋污染物',
         '83':'載運危險貨物、有害物質或海洋污染物,C類IMO有害物質或海洋污染物',
         '84':'載運危險貨物、有害物質或海洋污染物,IMO有害物質或海洋污染物',
         '85':'保留',
         '86':'保留',
         '87':'保留',
         '88':'保留',
         '89':'無額外資訊',
         '90':'其他類型船舶',
         '91':'載運危險貨物、有害物質或海洋污染物,A類IMO有害物質或海洋污染物',
         '92':'載運危險貨物、有害物質或海洋污染物,B類IMO有害物質或海洋污染物',
         '93':'載運危險貨物、有害物質或海洋污染物,C類IMO有害物質或海洋污染物',
         '94':'載運危險貨物、有害物質或海洋污染物,IMO有害物質或海洋污染物',
         '95':'保留',
         '96':'保留',
         '97':'保留',
         '98':'保留',
         '99':'無額外資訊'
     }
     ```

3. 需求实现

   - 默认情况下，对同一个URL多次提交下载请求，后面的请求会被去重过滤器过滤。在多次爬取一个内容随时间而变化的页面时（每次使用相同的URL），可以将该参数置为True

     ```python
     yield scrapy.Request('https://mpbais.motcmpb.gov.tw/webservice/geojsonais.ashx',
                                  callback=self.parse, dont_filter=True)
     ```

     